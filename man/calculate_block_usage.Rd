% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ccusage.R
\name{calculate_block_usage}
\alias{calculate_block_usage}
\title{Calculate Token Usage for 5-Hour Block}
\usage{
calculate_block_usage(blocks_data, current_window)
}
\arguments{
\item{blocks_data}{Blocks data tibble from \code{\link[=load_cached_ccusage]{load_cached_ccusage()}} with
"blocks" type. Must contain \code{timestamp} and \code{totalTokens} columns.}

\item{current_window}{List from \code{\link[=get_current_block_window]{get_current_block_window()}} containing
\code{block_start}, \code{block_end}, and \code{time_remaining} fields.}
}
\value{
List containing:
\itemize{
\item \code{tokens_used}: Numeric, tokens used in the current block
\item \code{tokens_limit}: Numeric, token limit per block (default 88000)
\item \code{usage_pct}: Integer, percentage of block limit used (0-100)
\item \code{time_remaining}: difftime object, time remaining in the block
\item \code{block_start}: POSIXct, block start time
\item \code{block_end}: POSIXct, block end time
}
}
\description{
Calculates token usage statistics for the current 5-hour block. Filters the blocks
data to entries within the specified block window and aggregates token counts.
Returns usage metrics and percentage of the 88,000-token block limit.
}
\details{
Calculate Max5 block usage from blocks data
}
\examples{
\dontrun{
# Get current block window
window <- get_current_block_window()

# Load blocks data
blocks <- load_cached_ccusage("blocks")

# Calculate usage
usage <- calculate_block_usage(blocks, window)
print(usage$usage_pct)
}

}
\seealso{
\itemize{
\item \code{\link[=get_current_block_window]{get_current_block_window()}} to get the block window
\item \code{\link[=show_max5_block_status]{show_max5_block_status()}} to display formatted block status
\item \code{\link[=get_block_history]{get_block_history()}} to view historical blocks
}
}
\keyword{internal}
